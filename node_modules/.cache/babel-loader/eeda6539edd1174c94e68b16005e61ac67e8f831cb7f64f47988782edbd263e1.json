{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport router from '../router';\nimport { APIService } from '../http/APIService';\nconst apiService = new APIService();\nexport default {\n  name: 'StockCreate',\n  beforeCreate() {\n    if (!localStorage.getItem(\"isAuthenticated\") || JSON.parse(localStorage.getItem(\"isAuthenticated\")) !== true) {\n      router.push(\"/auth\");\n    }\n  },\n  data() {\n    return {\n      customers: [],\n      showError: false,\n      stock: {},\n      pageTitle: \"Add New Stock\",\n      isUpdate: false,\n      showMsg: '',\n      authenticated: false\n    };\n  },\n  computed: {\n    list: {\n      get() {\n        return this.customers;\n      },\n      set(newValue) {\n        this.customers = newValue;\n      }\n    }\n  },\n  methods: {\n    getCustomers() {\n      apiService.getCustomerList().then(response => {\n        this.customers = response.data.data;\n      }).catch(error => {\n        if (error.response.status === 401) {\n          localStorage.clear();\n          router.push(\"/auth\");\n        }\n      });\n    },\n    createStock() {\n      apiService.addNewStock(this.stock).then(response => {\n        if (response.status === 201) {\n          this.stock = response.data;\n          this.showMsg = \"\";\n          router.push('/stock-list/new');\n        } else {\n          this.showMsg = \"error\";\n        }\n      }).catch(error => {\n        if (error.response.status === 401) {\n          router.push(\"/auth\");\n        } else if (error.response.status === 400) {\n          this.showMsg = \"error\";\n        }\n      });\n    },\n    cancelOperation() {\n      router.push(\"/stock-list\");\n    },\n    updateStock() {\n      apiService.updateStock(this.stock).then(response => {\n        if (response.status === 200) {\n          this.stock = response.data;\n          router.push('/stock-list/update');\n        } else {\n          this.showMsg = \"error\";\n        }\n      }).catch(error => {\n        if (error.response.status === 401) {\n          router.push(\"/auth\");\n        } else if (error.response.status === 400) {\n          this.showMsg = \"error\";\n        }\n      });\n    }\n  },\n  mounted() {\n    this.getCustomers();\n    if (this.$route.params.pk) {\n      this.pageTitle = \"Edit Stock\";\n      this.isUpdate = true;\n      apiService.getStock(this.$route.params.pk).then(response => {\n        this.stock = response.data;\n      }).catch(error => {\n        if (error.response.status === 401) {\n          router.push(\"/auth\");\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["router","APIService","apiService","name","beforeCreate","localStorage","getItem","JSON","parse","push","data","customers","showError","stock","pageTitle","isUpdate","showMsg","authenticated","computed","list","get","set","newValue","methods","getCustomers","getCustomerList","then","response","catch","error","status","clear","createStock","addNewStock","cancelOperation","updateStock","mounted","$route","params","pk","getStock"],"sources":["/Users/leothecub/Downloads/assignment3part2-main/investments-fe/src/components/StockCreate.vue"],"sourcesContent":["<template>\n  <div class=\"container-fluid\">\n    <div class=\"row align-items-center justify-content-center\">\n      <div class=\"col align-items-center\">\n        <div class=\"row align-items-center justify-content-center\">\n          <div class=\"col col-12 col-sm-10 col-md-10 col-lg-6\">\n            <div class=\"alert alert-danger shadow\" role=\"alert\" v-if=\"showMsg === 'error'\">\n              Please verify Stock Information\n            </div>\n          </div>\n        </div>\n        <div class=\"row align-items-center justify-content-center\">\n          <div class=\"col col-12 col-sm-10 col-md-10 col-lg-6 align-items-center\">\n            <div class=\"card\">\n              <div class=\"card-header\">{{ pageTitle }}</div>\n              <div class=\"card-body\">\n                <form ref=\"form\">\n                  <div class=\"container-fluid\">\n                    <div class=\"row justify-content-around py-2\">\n                      <label class=\"col-4\">Customer</label>\n                      <div class=\"col col-8\">\n                        <select v-model=\"stock.customer\" class=\"form-select\">\n                          <option class=\"form-select form-select-sm\" v-for=\"item in list\" :value=\"item.pk\" :key=\"item.pk\">{{ item.name }}</option>\n                        </select>\n                      </div>\n                    </div>\n                    <div class=\"form-group row justify-content-around py-2\">\n                      <label class=\"col-4\">Symbol</label>\n                      <div class=\"col col-8\">\n                        <input v-model=\"stock.symbol\" type=\"text\" class=\"form-control-sm form-control\">\n                      </div>\n                    </div>\n                    <div class=\"form-group row justify-content-around py-2\">\n                      <label class=\"col-4\">Name</label>\n                      <div class=\"col col-8\">\n                        <input v-model=\"stock.name\" type=\"text\" class=\"form-control-sm form-control\">\n                      </div>\n                    </div>\n                    <div class=\"form-group row justify-content-around py-2\">\n                      <label class=\"col-4\">Shares</label>\n                      <div class=\"col col-8\">\n                        <input v-model=\"stock.shares\" type=\"number\" class=\"form-control-sm form-control\">\n                      </div>\n                    </div>\n                    <div class=\"form-group row justify-content-around py-2\">\n                      <label class=\"col-4\">Purchase Price</label>\n                      <div class=\"col col-8\">\n                        <input v-model=\"stock.purchase_price\" type=\"number\" class=\"form-control-sm form-control\">\n                      </div>\n                    </div>\n                    <div class=\"form-group row justify-content-around py-2\">\n                      <label class=\"col-4\">Purchase Date</label>\n                      <div class=\"col col-8\">\n                        <input v-model=\"stock.purchase_date\" type=\"date\" class=\"form-control-sm form-control\">\n                      </div>\n                    </div>\n                    <div class=\"row justify-content-around\">\n                      <div v-if=\"!isUpdate\" type=\"button\" class=\"btn btn-primary col-4\" @click=\"createStock\">Save</div>\n                      <div v-if=\"isUpdate\" type=\"button\" class=\"btn btn-primary col-4\" @click=\"updateStock\">Update</div>\n                      <div type=\"button\" class=\"btn btn-secondary col-4\" @click=\"cancelOperation\">Cancel</div>\n                    </div>\n                  </div>\n                </form>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport router from '../router';\nimport { APIService } from '../http/APIService';\nconst apiService = new APIService();\n\nexport default {\n  name: 'StockCreate',\n  beforeCreate() {\n    if (!localStorage.getItem(\"isAuthenticated\") || JSON.parse(localStorage.getItem(\"isAuthenticated\")) !== true) {\n      router.push(\"/auth\");\n    }\n  },\n  data() {\n    return {\n      customers: [],\n      showError: false,\n      stock: {},\n      pageTitle: \"Add New Stock\",\n      isUpdate: false,\n      showMsg: '',\n      authenticated: false\n    };\n  },\n  computed: {\n    list: {\n      get() {\n        return this.customers;\n      },\n      set(newValue) {\n        this.customers = newValue;\n      }\n    }\n  },\n  methods: {\n    getCustomers() {\n      apiService.getCustomerList().then(response => {\n        this.customers = response.data.data;\n      }).catch(error => {\n        if (error.response.status === 401) {\n          localStorage.clear();\n          router.push(\"/auth\");\n        }\n      });\n    },\n    createStock() {\n      apiService.addNewStock(this.stock).then(response => {\n        if (response.status === 201) {\n          this.stock = response.data;\n          this.showMsg = \"\";\n          router.push('/stock-list/new');\n        } else {\n          this.showMsg = \"error\";\n        }\n      }).catch(error => {\n        if (error.response.status === 401) {\n          router.push(\"/auth\");\n        } else if (error.response.status === 400) {\n          this.showMsg = \"error\";\n        }\n      });\n    },\n    cancelOperation() {\n      router.push(\"/stock-list\");\n    },\n    updateStock() {\n      apiService.updateStock(this.stock).then(response => {\n        if (response.status === 200) {\n          this.stock = response.data;\n          router.push('/stock-list/update');\n        } else {\n          this.showMsg = \"error\";\n        }\n      }).catch(error => {\n        if (error.response.status === 401) {\n          router.push(\"/auth\");\n        } else if (error.response.status === 400) {\n          this.showMsg = \"error\";\n        }\n      });\n    }\n  },\n  mounted() {\n    this.getCustomers();\n    if (this.$route.params.pk) {\n      this.pageTitle = \"Edit Stock\";\n      this.isUpdate = true;\n      apiService.getStock(this.$route.params.pk).then(response => {\n        this.stock = response.data;\n      }).catch(error => {\n        if (error.response.status === 401) {\n          router.push(\"/auth\");\n        }\n      });\n    }\n  }\n};\n</script>\n\n<style scoped>\n.aform {\n  margin-left: auto;\n  width: 60%;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}